<html>
    <body>
        <script src="lib/crafty.js" type="text/javascript"></script>
        <script type="text/javascript">
          makescenewithtransition = function (name, initfn, nextscreen){
          Crafty.scene(name, function(){
          this.ready_grr = false;
          this.next_scene =
            function(){
             if(this.ready_grr){
              Crafty.scene(nextscreen);
             }
           }
           console.log(nextscreen)
    ;
          var that = this;
console.log("BINDING FOR " + name);
              Crafty.bind("KeyDown",this.next_scene);
          initfn();
          Crafty.e("Delay").delay(function() {
             console.log("100ms later");
             that.ready_grr = true;
          }, 100, 0);
          },
          function(){
          console.log("UNBIND");
console.log("UNBINDING FOR " + name);
             Crafty.unbind("KeyDown", this.next_scene);
          });
          }
          </script>
        <script src="out/goog/base.js" type="text/javascript"></script>
        <script src="packet_router.js" type="text/javascript"></script>
        <script type="text/javascript">goog.require("packet_router.core");</script>
    </body>
</html>
